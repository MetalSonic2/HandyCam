<!DOCTYPE html>
<html>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
z
<style>
  html {
    background: #23282D;
  }

  .HeadTitle i {
    color: #239FE4;
    font-size: xx-large;
    margin-right: 10px;
  }

  .HeadTitle h1,
  .HeadTitle i {
    display: inline-block;
    vertical-align: middle;
    text-align: right;
  }

  h1 {
    color: #239FE4;
    font-family: Arial, Helvetica, sans-serif;
    font-weight: normal;
  }

  h2 {
    color: black;
    font-size: larger;
    font-family: Verdana, Geneva, Tahoma, sans-serif;
    text-align: center;
  }

  .navbar {
    box-sizing: border-box;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1;
    width: 100%;
    height: 65px;
    background: #191C22;
  }

  .buttons {
    text-align: justify;
    bottom: 0;
    position: fixed;
  }

  .buttons:after {
    content: '';
    display: inline-block;
    width: 99.5%;
  }

  /* makeup*/
  .buttons {
    box-sizing: border-box;
    min-width: 45em;
    padding: 1.2em 1em 0;
    box-shadow: 0 0 5px;
    background: #191C22;
  }

  /* The popup chat - hidden by default */
  .chat-popup {
    display: none;
    position: fixed;
    bottom: 100px;
    right: 15px;
    border: 3px solid #f1f1f1;
    z-index: 9;
  }

  /* Add styles to the form container */
  .form-container {
    max-width: 300px;
    padding: 10px;
    background-color: white;
  }

  /* Full-width textarea */
  .form-container textarea {
    width: 100%;
    margin: 5px 0 22px 0;
    border: none;
    background: #f1f1f1;
    resize: none;
    min-height: 200px;
  }

  /* When the textarea gets focus, do something */
  .form-container textarea:focus {
    background-color: #ddd;
    outline: none;
  }

  /* Set a style for the submit/login button */
  .form-container .btn {
    background-color: #04AA6D;
    color: white;
    padding: 16px 20px;
    border: none;
    cursor: pointer;
    width: 100%;
    margin-bottom: 10px;
    opacity: 0.8;
  }

  /* Add a red background color to the cancel button */
  .form-container .cancel {
    background-color: red;
  }

  /* Add some hover effects to buttons */
  .form-container .btn:hover,
  .open-button:hover {
    opacity: 1;
  }

  .camera-button {
    background-color: rgb(39, 49, 53);
    border-color: rgba(246, 221, 221, 0.6);
    border-radius: 15px;
    color: rgba(247, 221, 221, 0.9);
    ;
    font-size: x-large;
    height: 80px;
    width: 200px;
  }

  .share-button {
    background-color: rgb(39, 49, 53);
    border-color: rgba(246, 221, 221, 0.6);
    ;
    border-radius: 15px;
    color: rgba(247, 221, 221, 0.9);
    font-size: xx-large;
    height: 80px;
    width: 200px;
  }

  .end-button {
    background-color: rgb(219, 46, 46);
    border-radius: 15px;
    border-color: rgba(246, 221, 221, 0.6);
    color: rgba(247, 221, 221, 0.9);
    ;
    font-family: Verdana, Geneva, Tahoma, sans-serif;
    font-size: x-large;
    height: 80px;
    width: 200px;
  }

  .open-button {
    background-color: rgb(39, 49, 53);
    border-radius: 15px;
    border-color: rgba(246, 221, 221, 0.6);
    color: rgba(247, 221, 221, 0.9);
    ;
    font-family: Verdana, Geneva, Tahoma, sans-serif;
    font-size: x-large;
    height: 80px;
    width: 200px;
  }

  .record-button {
    background-color: rgb(39, 49, 53);
    border-radius: 15px;
    border-color: rgba(246, 221, 221, 0.6);
    color: rgba(247, 221, 221, 0.9);
    ;
    font-family: Verdana, Geneva, Tahoma, sans-serif;
    font-size: x-large;
    height: 80px;
    width: 200px;
  }
  
/*   video element for the screen sharing (aka the box that'll be reflected) */
  .video-element {
      position: absolute;
      left: 0;
      width: 50%;
      height: 100%;
    }

</style>

<title>Handy Cam Project</title>

<body>

  <div class="HeadTitle">
    <div class=navbar>
      <i class="fa fa-american-sign-language-interpreting"></i>
      <h1>HandyCam</h1>
    </div>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-lg-8  offset-lg-2">
        <h3 class="mt-5">Live Streaming</h3>
        <img src="{{ url_for('video_feed') }}" width="50%">
      </div>
    </div>
  </div>

  <div class="chat-popup" id="myForm">
    <form action="/action_page.php" class="form-container">
      <h2>Chat</h2>

      <label for="msg"><b>Message</b></label>
      <textarea placeholder="Type message.." name="msg" required></textarea>

      <button type="submit" class="btn">Send</button>
      <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
    </form>
  </div>

  <script>
    function openForm() {
      document.getElementById("myForm").style.display = "block";
    }

    function closeForm() {
      document.getElementById("myForm").style.display = "none";
    }
  </script>

  <div class="buttons">
    <button class="camera-button"><i class="fa fa-video-camera"></i> Camera</button>
    <button class="share-button" id="share-btn"><i class="fa fa-share-square-o"></i> Share</button>
    <script src="https://cdn.webrtc-experiment.com/RecordRTC.js"></script>
    <script>
      var recorder;

      document.getElementById('share-btn').onclick = function () {
        navigator.mediaDevices.getDisplayMedia({ video: true, audio: true }).then(function (stream) {
          recorder = RecordRTC(stream, {
            type: 'video'
          });
          recorder.startRecording();
        });
      };
    </script>

    <button class="open-button" onclick="openForm()"><i class="fa fa-comments"></i> Chat</button>
    <button class="record-button"><i class="fa fa-file-video-o"></i> Record</button>
    <button class="end-button" onclick="window.close()">End Call</button>
  </div>


  <!--   Code to "reflect" our screen share  -->
  <video id="video-element" autoplay></video>
    <script>
      var recorder;
      var videoElement = document.getElementById('video-element'); 
      document.getElementById('share-btn').onclick = function() {
navigator.mediaDevices.getDisplayMedia({video: true, audio: true}).then(function(stream) {
          recorder = RecordRTC(stream, {
            type: 'video'
          });
          recorder.startRecording();
          
          videoElement.srcObject = stream;
        });
      };
    </script>

</body>


</html>
